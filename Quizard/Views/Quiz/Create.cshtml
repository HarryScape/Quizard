@model Quizard.ViewModels.CreateQuizViewModel

@*NEW JS SORTABLE ACCORDION*@

@Html.HiddenFor(x => x.Quiz.Id, new { id = "HiddenQuizId" })


<div class="flex-container">

    <div class="controls">
        @*<a class="btn btn-primary" href="@Url.Action("Update", "Quiz")">Save</a>*@

        <h4 class="quizName"> @Model.Quiz.QuizName </h4>

        <div class="input-group">
            <input type="text" class="input" id="AddSectionName" placeholder="Add Section" autocomplete="off">
            @*<input class="button--add" value="Add" type="submit">*@
            <input class="button--add" value="Add" type="submit" id="AddSectionBtn" onclick="AddSection()">
        </div>

        <input class="button--save" value="Save" type="submit" onclick="UpdateQuestions()">
        <input class="button--save" value="Dashboard" type="submit">
        <input class="button--save" value="Delete Quiz" type="submit" onclick="delete()">

    </div>

    @*    <div class="test">*@
    <div class="quiz-wrapper" id="partialZone">
        @{
            int Sindex = 0;
        }
        @foreach (var Qsection in Model.Sections.Where(i => i.QuizId.Equals(Model.Quiz.Id)))
        {
            int sectionId = Qsection.Id;
            <div class="accordion-section-item" id="@(sectionId)">
                @*<button class="delete-button" type="submit"><img src="@Url.Content("~/Content/Images/delbin.png")"></button>*@
                <button id="delete-button" type="submit"><img src="~/Content/Images/delbin.png" onclick="Delete()"></button>

                <button class="accordion-section-button"> <strong> @Qsection.SectionName </strong> </button>

                <div class="accordion-section-collapse ">
                    <div class="accordion-section-body">
                        @*questions *@
                        <div class="accordion-question">
                            @{
                                int Qindex = 0;
                            }
                            @foreach (var question in Model.Questions.Where(i => i.SectionId.Equals(Qsection.Id)))
                            {
                                int questionId = question.Id;
                                <div class="accordion-question-item" draggable="true" id="@questionId" data-section-index="@Sindex" data-sectionId="@sectionId" data-position="@Qindex">
                                    <button class="accordion-question-button"> @question.QuestionTitle </button>
                                    <div class="accordion-question-collapse collapse">
                                        <div class="accordion-question-body">
                                            @*answers*@
                                            <ol>
                                                @foreach (var answer in Model.Answers.Where(i => i.QuestionId.Equals(question.Id)))
                                                {
                                                    <li> @answer.QuestionAnswer </li>
                                                }
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                                Qindex++;
                            }
                        </div>
                    </div>
                </div>
            </div>
            Sindex++;
        }
    </div>
</div>

@*</div>*@




@section Scripts {



    <script>
        //"use strict";
        //$('#partialZone').load("/Quiz/SectionPartialView")
                        //$('#partialZone').load("/Quiz/SectionPartialView", new { id = Model.Quiz.Id })
                        //$('#partialZone').load("/Quiz/testPV")
                        //$('#partialZone').load("/Quiz/SectionPartialView?id=" + document.getElementById("HiddenQuizId").value)
    </script>
}